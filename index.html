<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>FPS Arena</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: #bfbfbf;
  font-family: Arial, sans-serif;
}
#hud {
  position: fixed;
  top: 10px;
  left: 10px;
  font-size: 18px;
  color: black;
  font-weight: bold;
}
#crosshair {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin-left: -10px;
  margin-top: -10px;
}
#crosshair::before,
#crosshair::after {
  content: "";
  position: absolute;
  background: black;
}
#crosshair::before {
  width: 2px;
  height: 20px;
  left: 9px;
}
#crosshair::after {
  width: 20px;
  height: 2px;
  top: 9px;
}
#shoot {
  position: fixed;
  right: 30px;
  bottom: 60px;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: darkred;
  color: white;
  font-size: 30px;
  border: none;
}
#stick {
  position: fixed;
  left: 30px;
  bottom: 40px;
  width: 120px;
  height: 120px;
  background: rgba(0,0,0,0.2);
  border-radius: 50%;
}
</style>
</head>

<body>
<canvas id="game"></canvas>

<div id="hud">‚ù§Ô∏è Vida: 100 | üî´ Rifle</div>
<div id="crosshair"></div>
<div id="stick"></div>
<button id="shoot">üî´</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = {
  x: 0,
  y: 0,
  angle: 0,
  speed: 3
};

const walls = [
  {x:-300,y:-300,w:600,h:40},
  {x:-300,y:260,w:600,h:40},
  {x:-300,y:-300,w:40,h:600},
  {x:260,y:-300,w:40,h:600},

  {x:-100,y:-40,w:200,h:30},
  {x:-200,y:100,w:100,h:30},
  {x:100,y:100,w:100,h:30}
];

let bullets = [];

function drawWall(w) {
  ctx.fillStyle = "#8a8a8a";
  ctx.fillRect(w.x, w.y, w.w, w.h);
}

function shoot() {
  bullets.push({
    x: player.x,
    y: player.y,
    a: player.angle
  });
}

document.getElementById("shoot").onclick = shoot;

document.addEventListener("mousemove", e => {
  player.angle = Math.atan2(
    e.clientY - canvas.height/2,
    e.clientX - canvas.width/2
  );
});

let keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function update() {
  if (keys["w"]) {
    player.x += Math.cos(player.angle) * player.speed;
    player.y += Math.sin(player.angle) * player.speed;
  }
  if (keys["s"]) {
    player.x -= Math.cos(player.angle) * player.speed;
    player.y -= Math.sin(player.angle) * player.speed;
  }
  if (keys["a"]) {
    player.x += Math.cos(player.angle - Math.PI/2) * player.speed;
    player.y += Math.sin(player.angle - Math.PI/2) * player.speed;
  }
  if (keys["d"]) {
    player.x += Math.cos(player.angle + Math.PI/2) * player.speed;
    player.y += Math.sin(player.angle + Math.PI/2) * player.speed;
  }
}

function render() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.save();
  ctx.translate(canvas.width/2 - player.x, canvas.height/2 - player.y);

  walls.forEach(drawWall);

  bullets.forEach(b=>{
    b.x += Math.cos(b.a)*8;
    b.y += Math.sin(b.a)*8;
    ctx.fillStyle = "black";
    ctx.fillRect(b.x,b.y,4,4);
  });

  ctx.restore();
}

function loop() {
  update();
  render();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
