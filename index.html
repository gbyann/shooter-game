<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>FPS Competitivo</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: #111;
  color: white;
  font-family: Arial, sans-serif;
}
#hud {
  position: fixed;
  top: 10px;
  left: 10px;
  font-size: 14px;
}
button {
  position: fixed;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: none;
  background: #333;
  color: white;
  font-size: 20px;
  opacity: 0.8;
}
#up { bottom: 120px; left: 80px; }
#down { bottom: 20px; left: 80px; }
#left { bottom: 70px; left: 20px; }
#right { bottom: 70px; left: 140px; }
#shoot { bottom: 70px; right: 40px; background: darkred; }
</style>
</head>

<body>
<canvas id="game"></canvas>

<div id="hud">
‚ù§Ô∏è Vida: <span id="life">100</span> |
üéØ Pontos: <span id="score">0</span>
</div>

<button id="up">‚ñ≤</button>
<button id="down">‚ñº</button>
<button id="left">‚óÄ</button>
<button id="right">‚ñ∂</button>
<button id="shoot">üî´</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = 1200;
canvas.height = 600;

// ===== PLAYER =====
const player = {
  x: 100,
  y: 300,
  size: 14,
  speed: 2,
  life: 100
};

// ===== MAPA ORIGINAL (CS-STYLE) =====
const walls = [
  { x: 0, y: 0, w: 1200, h: 20 },
  { x: 0, y: 580, w: 1200, h: 20 },
  { x: 0, y: 0, w: 20, h: 600 },
  { x: 1180, y: 0, w: 20, h: 600 },

  { x: 450, y: 180, w: 300, h: 40 },
  { x: 450, y: 380, w: 300, h: 40 },

  { x: 260, y: 120, w: 40, h: 360 },
  { x: 900, y: 120, w: 40, h: 360 },

  { x: 350, y: 90, w: 250, h: 30 },
  { x: 600, y: 480, w: 250, h: 30 }
];

// ===== INIMIGOS =====
let enemies = [];
for (let i = 0; i < 8; i++) {
  enemies.push({
    x: Math.random() * 900 + 200,
    y: Math.random() * 400 + 100,
    size: 12
  });
}

let bullets = [];
let score = 0;

// ===== COLIS√ÉO =====
function collides(x, y, size) {
  for (let w of walls) {
    if (
      x < w.x + w.w &&
      x + size > w.x &&
      y < w.y + w.h &&
      y + size > w.y
    ) return true;
  }
  return false;
}

// ===== CONTROLES =====
let keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

up.onclick = () => keys["w"] = true;
down.onclick = () => keys["s"] = true;
left.onclick = () => keys["a"] = true;
right.onclick = () => keys["d"] = true;

shoot.onclick = shootBullet;

// ===== TIRO =====
function shootBullet() {
  bullets.push({
    x: player.x + player.size / 2,
    y: player.y + player.size / 2,
    vx: 5,
    vy: 0
  });
}

// ===== GAME LOOP =====
function game() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // movimento player
  let nx = player.x;
  let ny = player.y;

  if (keys["w"]) ny -= player.speed;
  if (keys["s"]) ny += player.speed;
  if (keys["a"]) nx -= player.speed;
  if (keys["d"]) nx += player.speed;

  if (!collides(nx, player.y, player.size)) player.x = nx;
  if (!collides(player.x, ny, player.size)) player.y = ny;

  // desenhar mapa
  ctx.fillStyle = "#333";
  walls.forEach(w => ctx.fillRect(w.x, w.y, w.w, w.h));

  // player
  ctx.fillStyle = "cyan";
  ctx.fillRect(player.x, player.y, player.size, player.size);

  // balas
  ctx.fillStyle = "yellow";
  bullets.forEach(b => {
    b.x += b.vx;
    ctx.fillRect(b.x, b.y, 4, 2);
  });

  // inimigos
  ctx.fillStyle = "red";
  enemies.forEach((e, i) => {
    ctx.fillRect(e.x, e.y, e.size, e.size);

    bullets.forEach((b, bi) => {
      if (
        b.x < e.x + e.size &&
        b.x + 4 > e.x &&
        b.y < e.y + e.size &&
        b.y + 2 > e.y
      ) {
        enemies.splice(i, 1);
        bullets.splice(bi, 1);
        score++;
      }
    });
  });

  document.getElementById("life").innerText = player.life;
  document.getElementById("score").innerText = score;

  requestAnimationFrame(game);
}

game();
</script>
</body>
</html>
